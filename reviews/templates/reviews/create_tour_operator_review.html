{% extends 'core/base.html' %}
{% load static %}
{% block title %} Write a review {% endblock %}
{% block content %}
    <div ref="tour_form" class="container d-none" id="reviews_create_tour_operator_review">
        <h2 class="pt-2 pt-sm-0">Write a review for {{ tour_operator.name }}</h2>

        <template>
            <div class="vld-parent">
                <loading :active.sync="isLoading"></loading>
            </div>
        </template>
        <form method="post"
              @submit="handle_submit($event, '{% url 'reviews:tour_operator_save' pk=tour_operator.pk %}')">
            {% csrf_token %}
            <div class="form-group">
                <label class="font-16px" for="review_title"
                       v-bind:class="{'text-danger': errors && !!errors.review_title}">
                    What would you like to call your review?<span class="required"> *</span></label>

              <div class="position-relative">
                <input type="text"
                       class="form-control"
                       id="review_title"
                       v-bind:class="{'is-invalid': errors && !!errors.review_title}"
                       v-model="review_title"
                       name="review_title"
                       :maxlength="max_length_300"/>

                <span class="bootstrap-maxlength badge position-absolute d-block nowrap char-counter-position"
                      v-bind:class="{'bg-transparent-50 bg-army-green badge-success': charactersCounter(review_title) < max_length_300,  'badge-danger': !charactersCounter(review_title) < max_length_300}"
                >[[ charactersCounter(review_title) ]]</span>

              </div>

                <p class="text-danger" v-if="errors && !!errors.title">
                    <small>[[ errors.title[0] ]]</small>
                </p>
                <p class="text-danger font-12px" v-if="!$v.review_title.required && $v.review_title.$dirty">
                        Title is required.
                </p>
            </div>

            <div class="form-group">
                <label class="font-16px w-100" for="review_copy"
                       v-bind:class="{'text-danger': errors && !!errors.review_copy}">Your review<span class="required"> *</span></label>
                <div class="position-relative">
                <textarea
                        rows="8"
                        class="form-control"
                        id="review_copy"
                        v-bind:class="{'is-invalid': errors && !!errors.review_copy}"
                        v-model="review_copy"
                        name="review_copy"
                        :maxlength="max_length_15000"></textarea>


                    <span class="bootstrap-maxlength badge position-absolute d-block nowrap char-counter-position"
                          v-bind:class="{'bg-transparent-50 bg-army-green badge-success': charactersCounter(review_copy) < max_length_15000,  'badge-danger': !charactersCounter(review_copy) < max_length_15000}"
                    >[[ charactersCounter(review_copy) ]]</span>

                </div>


                <p class="text-danger" v-if="errors && !!errors.review_copy">
                    <small>[[ errors.review_copy[0] ]]</small>
                </p>
                <p class="text-danger font-12px" v-if="!$v.review_copy.required && $v.review_copy.$dirty">
                        Content is required.
                </p>

                <p class="text-danger font-12px" v-else-if="!$v.review_copy.minLength">
                        Content must have at least 150 characters.
                </p>
            </div>
            <div class="form-group">
                <label class="font-16px" for="booking_with_this_company">Did you end up going on safari with this company?</label>
                <br>
                <div class="custom-control custom-radio custom-control-inline">
                    <input
                            type="radio"
                            id="booking_with_this_company_yes"
                            v-model="booking_with_this_company"
                            v-bind:value="true"
                            name="booking_with_this_company"
                            class="custom-control-input">
                    <label
                            class="custom-control-label"
                            for="booking_with_this_company_yes"
                    >Yes</label>
                </div>
                <div class="custom-control custom-radio custom-control-inline">
                    <input
                            type="radio"
                            id="booking_with_this_company_no"
                            v-model="booking_with_this_company"
                            v-bind:value="false"
                            name="booking_with_this_company"
                            class="custom-control-input">
                    <label
                            class="custom-control-label"
                            for="booking_with_this_company_no"
                    >No</label>
                </div>
                <p class="text-danger" v-if="errors && !!errors.booking_with_this_company">
                    <small>[[ errors.booking_with_this_company[0] ]]</small>
                </p>
                <p class="text-danger font-12px" v-else-if="!$v.booking_with_this_company.required && $v.booking_with_this_company.$dirty">
                        Field is required.
                </p>
            </div>
            <div v-show="!!booking_with_this_company">
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="font-16px"
                                    for="start_date"
                                    v-bind:class="{'text-danger': errors && (!!errors.start_date_month || !!errors.start_date_year)}">When
                                did you go on safari?<span class="required"> *</span></label>
                    <select class="custom-select w-22 font-12px"
                            name="visit_date_year"
                            v-model="visit_date_year"
                            v-bind:class="{'is-invalid': errors && !!errors.visit_date_year}">
                        <option value="-2" hidden>-select year-</option>
                        <option v-for="year in current_year - 1999 + 1" :key="year" :value="[[ current_year - year + 1 ]]">[[ current_year - year + 1 ]]</option>
                    </select>
                    <select class="custom-select w-25 font-12px"
                            name="visit_date_month"
                            v-model="visit_date_month"
                            v-bind:class="{'is-invalid': errors && !!errors.visit_date_month}">
                        <option value="-2" hidden>-select month-</option>
                        <option v-if="visit_date_year != -2" value="1">January</option>
                        <option v-if="(visit_date_year != 2020 || current_month >= 2) && visit_date_year != -2" value="2">February</option>
                        <option v-if="(visit_date_year != 2020 || current_month >= 3) && visit_date_year != -2" value="3">March</option>
                        <option v-if="(visit_date_year != 2020 || current_month >= 4) && visit_date_year != -2" value="4">April</option>
                        <option v-if="(visit_date_year != 2020 || current_month >= 5) && visit_date_year != -2" value="5">May</option>
                        <option v-if="(visit_date_year != 2020 || current_month >= 6) && visit_date_year != -2" value="6">June</option>
                        <option v-if="(visit_date_year != 2020 || current_month >= 7) && visit_date_year != -2" value="7">July</option>
                        <option v-if="(visit_date_year != 2020 || current_month >= 8) && visit_date_year != -2" value="8">August</option>
                        <option v-if="(visit_date_year != 2020 || current_month >= 9) && visit_date_year != -2" value="9">September</option>
                        <option v-if="(visit_date_year != 2020 || current_month >= 10) && visit_date_year != -2" value="10">October</option>
                        <option v-if="(visit_date_year != 2020 || current_month >= 11) && visit_date_year != -2" value="11">November</option>
                        <option v-if="(visit_date_year != 2020 || current_month >= 12) && visit_date_year != -2" value="12">December</option>
                    </select>
                    <p class="text-danger font-12px" v-if="!$v.visit_date_month.minValue && $v.visit_date_month.$dirty">
                            Please select year and month.
                    </p>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="font-16px" for="days_booked"
                                   v-bind:class="{'text-danger': errors && !!errors.days_booked}">How many days was your safari?<span class="required"> *</span></label>
                            <select  class="custom-select w-22 font-12px"
                                    v-bind:class="{'is-invalid': errors && !!errors.days_booked}"
                                    v-model="days_booked"
                                    name="days_booked"
                                    id="days_booked">
                                <option :value="null" >- select -</option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                                <option value="7">7</option>
                                <option value="8">8</option>
                                <option value="9">9</option>
                                <option value="10">10</option>
                                <option value="11">11</option>
                                <option value="12">12</option>
                                <option value="13">13</option>
                                <option value="14">14</option>
                                <option value="15">15</option>
                                <option value="16">16</option>
                                <option value="17">17</option>
                                <option value="18">18</option>
                                <option value="19">19</option>
                                <option value="20">20</option>
                                <option value="21">21</option>
                                <option value="22">22</option>
                                <option value="23">23</option>
                                <option value="24">24</option>
                                <option value="25">25</option>
                                <option value="26">26</option>
                                <option value="27">27</option>
                                <option value="28">28</option>
                                <option value="29">29</option>
                                <option value="30">30</option>
                                <option value="-1">30+</option>
                            </select>
                            <p class="text-danger" v-if="errors && !!errors.days_booked">
                                <small>[[ errors.days_booked[0] ]]</small>
                            </p>
                            <p class="text-danger font-12px" v-if="!$v.days_booked.required && $v.days_booked.$dirty">
                                    Booking days are required.
                            </p>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="font-16px" for="safari_type_id"
                                   v-bind:class="{'text-danger': errors && !!errors.safari_type_id}">What type of safari
                                did you go on?<span class="required"> *</span></label>
                            <select class="custom-select font-12px"
                                    style='width: 38%;'
                                    v-bind:class="{'is-invalid': errors && !!errors.safari_type_id}"
                                    v-model="safari_type_id"
                                    name="safari_type_id"
                                    id="safari_type_id">

                                <option :value="null" >- select -</option>
                                <option v-for="safari_type in safari_types_json" :value="safari_type.id">[[
                                    safari_type.name ]]
                                </option>
                            </select>
                            <p class="text-danger" v-if="errors && !!errors.safari_type">
                                <small>[[ errors.safari_type[0] ]]</small>
                            </p>
                            <p class="text-danger font-12px" v-if="!$v.safari_type_id.required && $v.safari_type_id.$dirty">
                                    Safari type is required.
                            </p>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="font-16px" for="friend_recommend"
                                   v-bind:class="{'text-danger': errors && !!errors.friend_recommend}">Would you
                                recommend this tour operator?<span class="required"> *</span></label>
                            <div class="custom-control custom-radio custom-control-inline">
                                <input
                                        type="radio"
                                        id="friend_recommend_yes"
                                        v-model="friend_recommend"
                                        v-bind:value="false"
                                        name="friend_recommend_yes"
                                        class="custom-control-input">
                                <label
                                        class="custom-control-label"
                                        for="friend_recommend_yes"
                                >Yes</label>
                            </div>
                            <div class="custom-control custom-radio custom-control-inline">
                                <input
                                        type="radio"
                                        id="friend_recommend_no"
                                        v-model="friend_recommend"
                                        v-bind:value="true"
                                        name="friend_recommend_no"
                                        class="custom-control-input">
                                <label
                                        class="custom-control-label"
                                        for="friend_recommend_no"
                                >No</label>
                            </div>
                            <p class="text-danger font-12px" v-if="!$v.friend_recommend.required && $v.friend_recommend.$dirty">
                                Field is required.
                            </p>
                            <p class="text-danger" v-if="errors && !!errors.friend_recommend">
                                <small>[[ errors.friend_recommend[0] ]]</small>
                            </p>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label class="font-16px" for="selected_countries"
                           v-bind:class="{'text-danger': errors && !!errors.selected_countries}">Which country/countries
                        did you visit on this safari?<span class="required"> *</span></label>
                    <p class="text-danger" v-if="errors && !!errors.selected_countries">
                        <small>[[ errors.selected_countries[0] ]]</small>
                    </p>
                    <p class="text-danger font-12px" v-if="!$v.selected_countries.required && $v.selected_countries.$dirty">
                            Countries are required.
                    </p>
                    <div class="row">
                        <div class="col-md-4"
                             v-for="country in countries_json">
                            <div class="custom-control custom-checkbox custom-control-inline">
                                <input
                                        type="checkbox"
                                        :id="'selected_countries_' + country.id"
                                        v-model="selected_countries"
                                        v-bind:value="country.id"
                                        :name="'selected_countries_[' + country.id + ']'"
                                        class="custom-control-input">
                                <label
                                        class="custom-control-label"
                                        :for="'selected_countries_' + country.id"
                                >[[country.name]]</label>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="form-group" v-if="parks_to_select.length > 0">
                    <label class="font-16px" for="selected_countries"
                           v-bind:class="{'text-danger': errors && !!errors.selected_parks}">Parks and game reserves
                        you visited?<span class="required"> *</span></label>
                    <p class="text-danger" v-if="errors && !!errors.selected_parks">
                        <small>[[ errors.selected_parks[0] ]]</small>
                    </p>

                    <div class="row">
                        <div class="col-md-4"
                             v-for="park in parks_to_select">
                            <div class="custom-control custom-checkbox custom-control-inline">
                                <input
                                        type="checkbox"
                                        :id="'selected_parks_' + park.id"
                                        v-model="selected_parks"
                                        v-bind:value="park.id"
                                        :name="'selected_parks_[' + park.id + ']'"
                                        class="custom-control-input">
                                <label
                                        class="custom-control-label"
                                        :for="'selected_parks_' + park.id"
                                >[[park.name]]</label>
                            </div>
                        </div>
                    </div>

                    <p class="text-danger font-12px" v-if="!$v.selected_parks.required && $v.selected_parks.$dirty">
                            Parks are required.
                    </p>
                </div>
            </div>

        <div class="form-group mb-0" v-show="kilimanjaro_selected">
          <label class="font-16px" for="reached_summit">Which route did you climb?<span class="required"> *</span></label>
          <br>
          <p class="text-danger" v-if="errors && !!errors.route_to_climb">
              <small>[[ errors.route_to_climb[0] ]]</small>
          </p>

          <div class="row">
              <div class="col-12 col-sm-6 col-md-3 col-lg text-nowrap" v-for="item_route_to_climb in routes_to_climb_json">
                  <div class="custom-control custom-radio custom-control-inline">
                      <input
                              type="radio"
                              :id="'route_to_climb_' + item_route_to_climb.key"
                              v-model="route_to_climb"
                              v-bind:value="item_route_to_climb.key"
                              name="route_to_climb"
                              class="custom-control-input">
                      <label
                              class="custom-control-label"
                              :for="'route_to_climb_' + item_route_to_climb.key"
                      >[[ item_route_to_climb.value ]]</label>
                  </div>
              </div>

          </div>
          <div class="row">
              <div class="col-12">
                  <div class="custom-control custom-radio custom-control-inline">
                      <input
                              type="radio"
                              id="route_to_climb_OT"
                              v-model="route_to_climb"
                              v-bind:value="null"
                              name="route_to_climb"
                              class="custom-control-input">
                      <label
                              class="custom-control-label"
                              for="route_to_climb_OT"
                      >Other</label>
                  </div>
              </div>

              <div v-show="route_to_climb == null" class="col-12 col-sm-6">
                  <div class="form-group">
                      <input type="text"
                              :disabled="route_to_climb != null"
                              class="form-control"
                              id="other_route_to_climb"
                              v-bind:class="{'is-invalid': errors && !!errors.other_route_to_climb}"
                              v-model="other_route_to_climb"
                              name="other_route_to_climb">
                      <p class="text-danger" v-if="errors && !!errors.other_route_to_climb">
                          <small>[[ errors.other_route_to_climb[0] ]]</small>
                      </p>
                      <p class="text-danger font-12px" v-if="!$v.other_route_to_climb.requiredIf && $v.other_route_to_climb.$dirty">
                              This field is required if you choose "Other"
                      </p>
                  </div>
              </div>
          </div>
            <p class="text-danger font-12px" v-if="other_route_to_climb == '' && $v.route_to_climb.$dirty && route_to_climb == 'unselected'">
                    A route is required
            </p>
        </div>
	    <div class="row" v-show="kilimanjaro_selected">
                <div class="col-12">
                    <div class="form-group">
                        <label class="font-16px" for="reached_summit">Did you reach the summit?<span class="required"> *</span></label>
                        <br>
                        <div class="custom-control custom-radio custom-control-inline">
                            <input
                                    type="radio"
                                    id="reached_summit_yes"
                                    v-model="reached_summit"
                                    v-bind:value="true"
                                    name="reached_summit"
                                    class="custom-control-input">
                            <label
                                    class="custom-control-label"
                                    for="reached_summit_yes"
                            >Yes</label>
                        </div>
                        <div class="custom-control custom-radio custom-control-inline">
                            <input
                                    type="radio"
                                    id="reached_summit_no"
                                    v-model="reached_summit"
                                    v-bind:value="false"
                                    name="reached_summit"
                                    class="custom-control-input">
                            <label
                                    class="custom-control-label"
                                    for="reached_summit_no"
                            >No</label>
                        </div>
                        <p class="text-danger font-12px" v-if="!$v.reached_summit.requiredIf && $v.reached_summit.$dirty">
                            Field is required.
                        </p>
                        <p class="text-danger" v-if="errors && !!errors.reached_summit">
                            <small>[[ errors.reached_summit[0] ]]</small>
                        </p>
                    </div>
                </div>
                <div class="col-12">
                    <div class="form-group">
                        <label class="font-16px" for="take_medications">Did you take altitude sickness medication?<span class="required"> *</span></label>
                        <br>
                        <div class="custom-control custom-radio custom-control-inline">
                            <input
                                    type="radio"
                                    id="take_medications_yes"
                                    v-model="take_medications"
                                    v-bind:value="true"
                                    name="take_medications"
                                    class="custom-control-input">
                            <label
                                    class="custom-control-label"
                                    for="take_medications_yes"
                            >Yes</label>
                        </div>
                        <div class="custom-control custom-radio custom-control-inline">
                            <input
                                    type="radio"
                                    id="take_medications_no"
                                    v-model="take_medications"
                                    v-bind:value="false"
                                    name="take_medications"
                                    class="custom-control-input">
                            <label
                                    class="custom-control-label"
                                    for="take_medications_no"
                            >No</label>
                        </div>
                        <p class="text-danger font-12px" v-if="!$v.take_medications.requiredIf && $v.take_medications.$dirty">
                            Field is required.
                        </p>
                        <p class="text-danger" v-if="errors && !!errors.take_medications">
                            <small>[[ errors.take_medications[0] ]]</small>
                        </p>
                    </div>
                </div>

            <div class="col-12">
                <div class="form-group">
                    <p class="font-16px">How busy was it? <span class="required"> *</span></p>
                    <div class="row">
                        <div class="col-md-4 col-6 font-12px">
                            <p :class="{ 'mb-0' : !$v.crowdedness_rating.validateIf && $v.crowdedness_rating.$dirty  }">
                                Tranquility (1 = crowded | 5 = empty)</p>
                        </div>
                        <div class="col">
                            <star-rating
                                    :star-size="20"
                                    :show-rating="false"
                                    @rating-selected="set_crowdedness_rating"></star-rating>
                        </div>
                    </div>
                    <p class="text-danger font-12px" v-if="!$v.crowdedness_rating.validateIf && $v.crowdedness_rating.$dirty">
                            Field is required.
                    </p>
                </div>
            </div>

            <div class="col-12">
              <div class="form-group">
                <label class="font-16px w-100" for="review_copy"
                       v-bind:class="{'text-danger': errors && !!errors.kilimanjaro_content}">Any advice for those considering this experience?<span
                      class="required"> *</span></label>
                <div class="position-relative">
                <textarea
                    rows="4"
                    class="form-control"
                    id="kilimanjaro_content"
                    v-bind:class="{'is-invalid': errors && !!errors.kilimanjaro_content}"
                    v-model="kilimanjaro_content"
                    name="kilimanjaro_content"
                    :maxlength="max_length_15000"></textarea>


                  <span class="bootstrap-maxlength badge position-absolute d-block nowrap char-counter-position"
                        v-bind:class="{'bg-transparent-50 bg-army-green badge-success': charactersCounter(kilimanjaro_content) < max_length_15000,  'badge-danger': !charactersCounter(kilimanjaro_content) < max_length_15000}"
                  >[[ charactersCounter(kilimanjaro_content) ]]</span>

                </div>

                <p class="text-danger" v-if="errors && !!errors.kilimanjaro_content">
                  <small>[[ errors.kilimanjaro_content[0] ]]</small>
                </p>

                <p class="text-danger font-12px" v-if="!$v.kilimanjaro_content.requiredIf && $v.kilimanjaro_content.$dirty">
                    Content is required.
                </p>

                <p class="text-danger font-12px"
                   v-else-if="!$v.kilimanjaro_content.correctLength">
                    Content must have at least 150 characters.
                </p>
              </div>
            </div>

            </div>



            <p class="font-16px">Please rate this tour operator<span class="required"> *</span></p>
            <div class="row" v-show="!!booking_with_this_company">

                <div class="col-md-4 col-6 font-12px">
                    <p :class="{ 'mb-0' : !$v.meet_and_greet_rating.minValue && $v.meet_and_greet_rating.$dirty  }">
                        Meet and greet team</p>
                </div>
                <div class="col">
                    <star-rating
                            :star-size="20"
                            :show-rating="false"
                            @rating-selected="set_meet_and_greet_rating"></star-rating>
                </div>
            </div>
            <p class="text-danger font-12px" v-if="!$v.meet_and_greet_rating.minValue && $v.meet_and_greet_rating.$dirty">
                    Field is required.
            </p>
            <div class="row" v-show="!!booking_with_this_company">
                 <div class="col-md-4 col-6 font-12px">
                    <p :class="{ 'mb-0' : !$v.vehicle_rating.minValue && $v.vehicle_rating.$dirty  }">
                        Quality and cleanliness of vehicles</p>
                </div>
                <div class="col">
                    <star-rating
                            :star-size="20"
                            :show-rating="false"
                            @rating-selected="set_vehicle_rating"></star-rating>
                </div>
            </div>
            <p class="text-danger font-12px" v-if="!$v.vehicle_rating.minValue && $v.vehicle_rating.$dirty">
                    Field is required.
            </p>
            <div class="row">
                <div class="col-md-4 col-6 font-12px">
                    <p :class="{ 'mb-0' : !$v.responsiveness_rating.minValue && $v.responsiveness_rating.$dirty  }">
                        Responsiveness of staff</p>
                </div>
                <div class="col">
                    <star-rating
                            :star-size="20"
                            :show-rating="false"
                            @rating-selected="set_responsiveness_rating"></star-rating>
                </div>
            </div>
            <p class="text-danger font-12px" v-if="!$v.responsiveness_rating.minValue && $v.responsiveness_rating.$dirty">
                    Field is required.
            </p>
            <div class="row" v-show="!!booking_with_this_company">
                 <div class="col-md-4 col-6 font-12px">
                    <p :class="{ 'mb-0' : !$v.safari_quality_rating.minValue && $v.safari_quality_rating.$dirty  }">
                        Caliber and knowledge of safari guide</p>
                </div>
                <div class="col">
                    <star-rating
                            :star-size="20"
                            :show-rating="false"
                            @rating-selected="set_safari_quality_rating"></star-rating>
                </div>
            </div>
            <p class="text-danger font-12px" v-if="!$v.safari_quality_rating.minValue && $v.safari_quality_rating.$dirty">
                    Field is required.
            </p>
            <div class="row">
                <div class="col-md-4 col-6 font-12px">
                    <p :class="{ 'mb-0' : !$v.itinerary_quality_rating.minValue && $v.itinerary_quality_rating.$dirty  }">
                        Quality of itinerary</p>
                </div>
                <div class="col">
                    <star-rating
                            :star-size="20"
                            :show-rating="false"
                            @rating-selected="set_itinerary_quality_rating"></star-rating>
                </div>
            </div>
            <p class="text-danger font-12px" v-if="!$v.itinerary_quality_rating.minValue && $v.itinerary_quality_rating.$dirty">
                    Field is required.
            </p>
            <div class="row">
                <div class="col-md-4 col-6 font-12px">
                    <p :class="{ 'mb-0' : !$v.overall_rating.minValue && $v.overall_rating.$dirty  }">
                        Overall rating</p>
                </div>
                <div class="col">
                    <star-rating
                            :star-size="20"
                            :show-rating="false"
                            @rating-selected="set_overall_rating"></star-rating>
                </div>
            </div>
            <p class="text-danger font-12px" v-if="!$v.overall_rating.minValue && $v.overall_rating.$dirty">
                    Field is required.
            </p>

            <div class="form-group" v-show="kilimanjaro_selected && selected_parks.length > 1 || !kilimanjaro_selected && selected_parks.length > 0">
                <label class="font-16px" for="selected_countries"
                       v-bind:class="{'text-danger': errors && !!errors.selected_animals}">What were the top animal sightings?</label>
                <p class="text-danger" v-if="errors && !!errors.selected_animals">
                    <small>[[ errors.selected_animals[0] ]]</small>
                </p>
                <div class="row">
                    <div class="col-md-4"
                         v-for="animal in animals_json">
                        <div class="custom-control custom-checkbox custom-control-inline">
                            <input
                                    type="checkbox"
                                    :id="'selected_animals_' + animal.id"
                                    v-model="selected_animals"
                                    v-bind:value="animal.id"
                                    :name="'selected_animals_[' + animal.id + ']'"
                                    class="custom-control-input"
                                    :disabled="selected_animals.length > 4 && !selected_animals.includes(animal.id)">
                            <label
                                    class="custom-control-label"
                                    :for="'selected_animals_' + animal.id"
                            >[[animal.name]]</label>
                        </div>
                    </div>
                </div>
                <p class="text-danger font-12px" v-if="!$v.selected_animals.required && $v.selected_animals.$dirty">
                        Choose at least one animal.
                </p>
            </div>
            <div class="form-group" v-show="kilimanjaro_selected && selected_parks.length > 1 || !kilimanjaro_selected && selected_parks.length > 0">
                <label class="font-16px" for="selected_activities"
                       v-bind:class="{'text-danger': errors && !!errors.selected_activities}">What activities did you do
                    on safari?</label>
                <p class="text-danger" v-if="errors && !!errors.selected_activities">
                    <small>[[ errors.selected_activities[0] ]]</small>
                </p>
                <div class="row">
                    <div class="col-md-4"
                         v-for="activity in activities_json">
                        <div class="custom-control custom-checkbox custom-control-inline">
                            <input
                                    type="checkbox"
                                    :id="'selected_activities_' + activity.id"
                                    v-model="selected_activities"
                                    v-bind:value="activity.id"
                                    :name="'selected_activities_[' + activity.id + ']'"
                                    class="custom-control-input">
                            <label
                                    class="custom-control-label"
                                    :for="'selected_activities_' + activity.id"
                            >[[activity.name]]</label>
                        </div>
                    </div>
                </div>
                <p class="text-danger font-12px" v-if="!$v.selected_activities.required && $v.selected_activities.$dirty">
                        Choose at least one activity.
                </p>
            </div>
            <div class="form-group">
                <label class="font-16px" for="pearls_of_wisdom"
                       v-bind:class="{'text-danger': errors && !!errors.pearls_of_wisdom}">
                    What was the highlight of your trip?</label>

              <div class="position-relative">

                <input type="text"
                       v-model="pearls_of_wisdom"
                       v-bind:class="{'is-invalid': errors && !!errors.pearls_of_wisdom}"
                       class="form-control"
                       id="pearls_of_wisdom"
                       name="pearls_of_wisdom"
                       :maxlength="max_length_300"/>

                <span class="bootstrap-maxlength badge position-absolute d-block nowrap char-counter-position"
                      v-bind:class="{'bg-transparent-50 bg-army-green badge-success': charactersCounter(pearls_of_wisdom) < max_length_300,  'badge-danger': !charactersCounter(pearls_of_wisdom) < max_length_300}"
                >[[ charactersCounter(pearls_of_wisdom) ]]</span>
              </div>

                <p class="text-danger" v-if="errors && !!errors.pearls_of_wisdom">
                    <small>[[ errors.pearls_of_wisdom[0] ]]</small>
                </p>

            </div>

      <div class="form-group">
              <label class="font-16px" for="find_out"
                     v-bind:class="{'text-danger': errors && !!errors.find_out}">
                  How did you find the tour operator you used?<span class="required"> *</span></label>
              <select class="custom-select w-15 font-12px"
                      v-model="find_out"
                      v-bind:class="{'is-invalid': errors && !!errors.find_out}"
                      name="find_out"
                      id="find_out">
                  <option value="">- Choose one -</option>
                  <option value="A friend/family recommended them">A friend/family recommended them</option>
                  <option value="Google search">Google search</option>
                  <option value="Trade show">Trade show</option>
                  <option value="Article in newspaper/magazine">Article in newspaper/magazine</option>
                  <option value="Website">Website</option>
              </select>
              <p class="text-danger" v-if="errors && !!errors.find_out">
                  <small>[[ errors.find_out[0] ]]</small>
              </p>
                  <p class="text-danger font-12px" v-if="!$v.find_out.required && $v.find_out.$dirty">
                          This field is required.
                  </p>
          </div>

	    <div class="form-group" v-if="find_out == 'Website'">
                <label for="find_out_website"
                       v-bind:class="{'text-danger': errors && !!errors.find_out_website}">
                    Which website<span class="required"> *</span>
                    </label>
                <input type="text"
                       v-model="find_out_website"
                       v-bind:class="{'is-invalid': errors && !!errors.find_out_website}"
                       class="form-control"
                       id="find_out_website"
                       name="find_out_website" />
                <p class="text-danger" v-if="errors && !!errors.find_out_website">
                    <small>[[ errors.find_out_website[0] ]]</small>
                </p>
            <p class="text-danger font-12px" v-if="!$v.find_out_website.required && $v.find_out_website.$dirty">
                    This field is required.
            </p>
            </div>            
            <div class="form-group">
                <div class="custom-control custom-checkbox custom-control-inline">
                    <input
                            type="checkbox"
                            id="like_upload_photos"
                            v-model="like_upload_photos"
                            v-bind:value="false"
                            name="like_upload_photos"
                            class="custom-control-input">
                    <label
                            class="custom-control-label"
                            for="like_upload_photos"
                    >Would you like to upload some photos? (A new page will follow)</label>
                </div>
                <p class="text-danger" v-if="errors && !!errors.like_upload_photos">
                    <small>[[ errors.like_upload_photos[0] ]]</small>
                </p>
            </div>
            <div class="form-group">
              <div class="custom-control custom-checkbox custom-control-inline">
                  <input
                          type="checkbox"
                          id="i_certify_these_photos"
                          v-model="i_certify_these_photos"
                          v-bind:value="false"
                          name="i_certify_these_photos"
                          class="custom-control-input">
                  <label
                          class="custom-control-label font-weight-600"
                          for="i_certify_these_photos"
                  >I certify that this review is a direct result of my own safari experience. I further certify that this review is my honest opinion of the safari tour operator and that I have no professional affiliation with the safari company, nor have I been offered any incentive or payment originating from the tour operator to write this review.<span class="required"> *</span></label>
              </div>
              <p class="text-danger" v-if="errors && !!errors.i_certify_these_photos">
                  <small>[[ errors.i_certify_these_photos[0] ]]</small>
              </p>
              <p class="text-danger font-12px" v-if="!$v.i_certify_these_photos.$model && $v.i_certify_these_photos.$dirty">
                      This field is required.
              </p>
          </div>
            <div v-if="serverError" class="alert alert-danger">
                [[ serverError ]]
            </div>
            <a href="{% url 'reviews:create' %}" class="btn btn-green-secondary mr-2">Cancel</a>
            <button type="submit" class="btn btn-green-primary">Submit</button>

            <p class="text-danger font-12px" v-if="$v.$dirty">
              Please check for missing fields
            </p>
        </form>
    </div>
{% endblock %}
{% block afterfooter %}
    <script src="{% static 'reviews/js/create_tour_operator_review.js' %}"></script>
    <style>
        .char-counter-position {
            z-index: 1;
            bottom: -16px;
            right: 0;
        }
    </style>
{% endblock %}
